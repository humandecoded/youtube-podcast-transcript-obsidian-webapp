<!-- templates/index.html (excerpt) -->
{% extends "base.html" %}
{% block content %}
<div class="grid">
<!-- YouTube card (existing) -->
<div class="card">
<h2>YouTube â†’ Obsidian</h2>
<form method="post" action="{{ url_for('summarize') }}">
<label> YouTube URL
<input type="url" name="youtube_url" placeholder="https://www.youtube.com/watch?v=..." required>
</label>
<div class="row">
<label>Vault <input type="text" name="vault" value="{{ defaults.vault }}"></label>
<label>Folder <input type="text" name="folder" value="{{ defaults.folder }}"></label>
</div>
<div class="row">
<label>Langs <input type="text" name="langs" value="{{ defaults.langs }}"></label>
<label>Ollama Base <input type="url" name="ollama_base" value="{{ defaults.ollama_base }}"></label>
<label>Model <input type="text" name="model" value="{{ defaults.model }}"></label>
</div>
<div class="form-group">
<label for="context_length">Context length:</label>
<input type="number" id="context_length" name="context_length" value="{{ defaults.context_length or 32000 }}" min="512" max="128000">
<small>Maximum context size for the LLM (tokens)</small>
</div>
<div class="form-group">
<label for="yt_segment_duration">Segment duration (seconds):</label>
<input type="number" id="yt_segment_duration" name="segment_duration" value="3600" min="60" max="7200" step="60">
<small>Duration for each segment when using per-time summaries (3600 = 1 hour)</small>
</div>
<div class="form-group">
<label for="yt_system_prompt">System Prompt:</label>
<textarea id="yt_system_prompt" name="system_prompt" rows="3">{{ defaults.system_prompt }}</textarea>
<small>Sets the overall behavior for the AI (prepended to all prompts)</small>
</div>
<div class="form-group">
<label for="yt_summary_prompt">Full Summary Prompt:</label>
<textarea id="yt_summary_prompt" name="summary_prompt" rows="6">{{ defaults.youtube_summary_prompt }}</textarea>
<small>Used for complete transcript summary. Supports: {title}, {url}, {transcript}</small>
</div>
<div class="form-group">
<label for="yt_segment_prompt">Per-Hour Segment Prompt:</label>
<textarea id="yt_segment_prompt" name="segment_prompt" rows="4">{{ defaults.youtube_segment_prompt }}</textarea>
<small>Used when per-hour mode is enabled. Supports: {title}, {url}, {start_hms}, {end_hms}, {transcript}</small>
</div>
<label><input type="checkbox" name="no_summary"> Metadata only (for just setting up a note)</label>
<label><input type="checkbox" name="include_transcript"> Include transcript in note</label>
<label><input type="checkbox" name="use_cookies"> ğŸª Use cookies file for age-gated videos</label>
<label><input type="checkbox" name="use_proxy"> ğŸŒ Use HTTP proxy</label>
<label>
    <input type="checkbox" name="per_hour" id="yt_per_hour"> 
    â±ï¸ Per-segment summaries (for long videos)
</label>
<button type="submit">Create note</button>
</form>
</div>
<!-- Podcast card (new) -->
<div class="card">
<h2>Podcast â†’ Obsidian</h2>
<form method="post" action="{{ url_for('podcast') }}">
<label> Podcast Episode URL
<input type="url" name="podcast_url" placeholder="https://example.com/episode/..." required>
</label>
<div class="row">
<label>Vault <input type="text" name="vault" value="{{ defaults.vault }}"></label>
<label>Folder <input type="text" name="folder" value="{{ defaults.folder }}"></label>
</div>
<div class="row">
<label>Langs <input type="text" name="langs" value="{{ defaults.langs }}"></label>
<label>Ollama Base <input type="url" name="ollama_base" value="{{ defaults.ollama_base }}"></label>
<label>Model <input type="text" name="model" value="{{ defaults.model }}"></label>
</div>
<div class="form-group">
<label for="podcast_context_length">Context length:</label>
<input type="number" id="podcast_context_length" name="context_length" value="{{ defaults.context_length or 15000 }}" min="512" max="128000">
<small>Maximum context size for the LLM (tokens)</small>
</div>
<div class="form-group">
<label for="podcast_segment_duration">Segment duration (seconds):</label>
<input type="number" id="podcast_segment_duration" name="segment_duration" value="1800" min="60" max="7200" step="60">
<small>Duration for each segment when using per-time summaries (3600 = 1 hour)</small>
</div>
<div class="form-group">
<label for="podcast_system_prompt">System Prompt:</label>
<textarea id="podcast_system_prompt" name="system_prompt" rows="3">{{ defaults.system_prompt }}</textarea>
<small>Sets the overall behavior for the AI (prepended to all prompts)</small>
</div>
<div class="form-group">
<label for="podcast_summary_prompt">Full Summary Prompt:</label>
<textarea id="podcast_summary_prompt" name="summary_prompt" rows="6">{{ defaults.podcast_summary_prompt }}</textarea>
<small>Used for complete transcript summary. Supports: {show}, {title}, {url}, {transcript}</small>
</div>
<div class="form-group">
<label for="podcast_segment_prompt">Per-Segment Prompt:</label>
<textarea id="podcast_segment_prompt" name="segment_prompt" rows="4">{{ defaults.podcast_segment_prompt }}</textarea>
<small>Used when per-segment mode is enabled. Supports: {show}, {title}, {url}, {start_hms}, {end_hms}, {transcript}</small>
</div>
<label><input type="checkbox" name="no_summary"> Metadata only (for just setting up a note)</label>
<label><input type="checkbox" name="include_transcript"> Include transcript in note</label>
<label><input type="checkbox" name="use_cookies"> ğŸª Use cookies file for authenticated content</label>
<label><input type="checkbox" name="use_proxy"> ğŸŒ Use HTTP proxy</label>
<label>
    <input type="checkbox" name="per_segment" id="podcast_per_segment"> 
    â±ï¸ Per-segment summaries (for long episodes)
</label>
<button type="submit">Create note</button>

</form>
</div>
</div>
{% endblock %}